<ngt-mesh-basic-material #yellow noAppend color="yellow"></ngt-mesh-basic-material>
<ngt-mesh-basic-material #black noAppend color="black"></ngt-mesh-basic-material>

<ngt-group [name]="name" [visible]="visible" [position]="position" [rotation]="rotation" [scale]="scale">
  <flat-ui-menu-mini #menu [menuitems]="menuitems" [selectable]="selectable"></flat-ui-menu-mini>

  <flat-ui-select #select [text]="filtervalue" [position]="[menu.width+0.5, 0, 0]" [selectable]="selectable"
                  (change)="changeFilter($event)" (openinput)="input.openlist($event, select, filterlist, filtervalue)">
  </flat-ui-select>

  <flat-ui-list [position]="[1, -0.65, 0]" [width]="2" [height]="1" [rowcount]="4" [rowsize]="rowheight"
                [enablehover]="true" [list]="filtereditems" [selectable]="selectable">

    <ng-template #listItem let-list="list" let-text="text" let-width="width" let-data="data" let-index="index" let-parent="parent">
      <ngt-group *ngIf="data" [appendTo]="parent">
        <flat-ui-base-button [selectable]="selectable" [text]="text" [width]="width" [height]="rowheight" (pressed)="open(data)">
          <ng-template #button let-parent="parent">
            <ngt-group [appendTo]="parent">

              <flat-ui-material-icon [position]="[-0.9, 0, 0]" [fontsize]="0.1" [labelmaterial]="data.isfolder ? yellow.instance.value : black.instance.value" [text]="data.isfolder ? 'folder' : 'insert_drive_file'"></flat-ui-material-icon>
              <flat-ui-label [position]="[0, 0.05, 0]" [text]="data.name" [width]="1.6"></flat-ui-label>
              <flat-ui-label [position]="[0, -0.05, 0]" text="{{data.lastmodified | amTimeAgo}}" [width]="1.6"></flat-ui-label>

            </ngt-group>

            <flat-ui-menu-mini [position]="[0.6, 0, 0]" [selectable]="selectable">
              <flat-ui-menu-item [text]="'Rename'" [icon]="'drive_file_rename_outline'" (pressed)="renameItem(data)"></flat-ui-menu-item>
              <flat-ui-menu-item *ngIf="!data.isfolder" [enabled]="data.id==fileid" [text]="'Duplicate File'" [icon]="'file_copy'" (pressed)="duplicateFile(data.name)"></flat-ui-menu-item>
              <flat-ui-menu-item [text]="'Delete'" [icon]="'delete'" (pressed)="deleteItem(data.id)"></flat-ui-menu-item>
            </flat-ui-menu-mini>

          </ng-template>
        </flat-ui-base-button>
      </ngt-group>
    </ng-template>

  </flat-ui-list>


</ngt-group>


<flat-ui-list *ngIf="input.showlist" [list]="input.list" [selectedtext]="input.method.text" [rowcount]="9" [height]="1.2"
              [position]="input.position" [rotation]="input.rotation" [scale]="scale" [selectable]="selectable"
              (change)="input.method.text = $event.text;input.showlist=false" (close)="input.showlist=false;input.closeinput()">
</flat-ui-list>
